(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(2),r=t(15),a=t.n(r),i=t(3),u=t(5),s=t(4),l=t.n(s),d="/api/persons",m={getAll:function(){return l.a.get(d)},del:function(e,n){return l.a.delete("".concat(d,"/").concat(e),n)},create:function(e){return l.a.post(d,e)},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)}},f=function(e){var n=e.setNewName,t=e.newName,c=e.setPersons,r=e.setNumber,a=e.newNumber,i=e.persons,s=e.setNotification,l=function(e){var n=e.name===t,o=e.number===a,r=Object(u.a)(Object(u.a)({},e),{},{number:a}),i=Object(u.a)(Object(u.a)({},e),{},{name:t});n?m.update(e.id,r).then((function(n){c((function(n){return n.map((function(n){return e.id===n.id?r:n}))})),s("".concat(e.name,"'s Number changed successfully to ").concat(a)),setTimeout((function(){s(null)}),5e3)})).catch((function(n){s("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){s(null)}),5e3)})):o&&m.update(e.id,i).then((function(n){c((function(n){return n.map((function(n){return e.id===n.id?i:n}))})),s("Name changed from ".concat(e.name," to ").concat(t," successfully!")),setTimeout((function(){s(null)}),5e3)})).catch((function(n){s("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){s(null)}),5e3)}))};return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=t.toLowerCase(),c=i.find((function(e){return e.name.toLowerCase()===o})),u=i.find((function(e){return e.number===a}));c?window.confirm("".concat(t," is already added to phonebook. Do you want to replace old number with new one?"))&&(l(c),n(" "),r(" ")):u?window.confirm("PhoneNumber is already added to phonebook. Do you want to replace contact name with ".concat(t,"?"))&&(l(u),n(" "),r(" ")):function(){var e={name:t,id:i.length+1,number:"".concat(a)};m.create(e).then((function(e){n(""),r(""),s("Contact added successfully"),setTimeout((function(){s(null)}),5e3)})).catch((function(e){console.log(e.response.data),s(e.response.data),setTimeout((function(){s(null)}))}))}()},children:[Object(o.jsxs)("div",{style:{margin:"1rem 0"},children:["name: ",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:a,onChange:function(e){r(e.target.value)},required:!0})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},b=function(e){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("p",{children:[e.person," ",Object(o.jsx)("br",{}),e.phoneNumber," ",Object(o.jsx)("button",{onClick:e.handledelete,style:{margin:"0 1rem"},children:"Delete"})]})})},j=function(e){var n=e.nameFilter,t=e.persons,c=e.setPersons,r=e.setNotification,a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})),i=n.trim()?a:t;return Object(o.jsx)(o.Fragment,{children:i.map((function(e){return Object(o.jsx)(b,{person:e.name,phoneNumber:e.number,handledelete:function(){return function(e){console.log(e);var n=i.find((function(n){return n.id===e}));console.log(n),window.confirm("Delete ".concat(n.name,"?"))&&m.del(e,n).then((function(n){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){r("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){r(null)}),5e3)}))}(e.id)}},e.id)}))})},h=function(e){var n=e.nameFilter,t=e.setNameFilter;e.persons;return Object(o.jsxs)("form",{children:[Object(o.jsx)("h2",{children:"Search Contact"}),Object(o.jsx)("input",{type:"search",placeholder:"Type to search",value:n,onChange:function(e){t(e.target.value)}})]})},p=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})};t(39);var O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),s=u[0],l=u[1],d=Object(c.useState)(""),b=Object(i.a)(d,2),O=b[0],v=b[1],x=Object(c.useState)(""),w=Object(i.a)(x,2),N=w[0],g=w[1],y=Object(c.useState)(null),C=Object(i.a)(y,2),k=C[0],F=C[1];return Object(c.useEffect)((function(){m.getAll().then((function(e){r(e.data)}))}),[t]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(p,{message:k}),Object(o.jsx)(h,{nameFilter:N,setNameFilter:g,persons:t}),Object(o.jsx)("h2",{children:"Add New Contact"}),Object(o.jsx)(f,{setNewName:l,newName:s,setPersons:r,setNumber:v,newNumber:O,persons:t,setNotification:F}),Object(o.jsx)("h2",{children:"Contact List"}),Object(o.jsx)(j,{nameFilter:N,persons:t,setPersons:r,setNotification:F})]})};a.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c8d1bf63.chunk.js.map