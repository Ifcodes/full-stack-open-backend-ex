(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(2),r=t(15),a=t.n(r),i=t(3),u=t(5),s=t(4),l=t.n(s),d="http://localhost:3002/api/persons",f={getAll:function(){return l.a.get(d)},del:function(e,n){return l.a.delete("".concat(d,"/").concat(e),n)},create:function(e){return l.a.post(d,e)},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)}},m=function(e){var n=e.setNewName,t=e.newName,c=e.setPersons,r=e.setNumber,a=e.newNumber,i=e.persons,s=e.setNotification;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=t.toLowerCase(),l=i.find((function(e){return e.name.toLowerCase()===o})),d=i.find((function(e){return e.phoneNumber===a}));l?window.confirm("".concat(t," is already added to phonebook. Do you want to replace old number with new one?"))&&function(e){var n=Object(u.a)(Object(u.a)({},e),{},{phoneNumber:a});f.update(e.id,n).then((function(t){c((function(t){return t.map((function(t){return e.id===t.id?n:t}))})),s("Number changed successfully to ".concat(a)),setTimeout((function(){s(null)}),5e3)})).catch((function(n){s("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){s(null)}),5e3)}))}(l):d?window.confirm("PhoneNumber is already added to phonebook. Do you want to replace contact name with ".concat(t,"?"))&&(!function(e){var n=Object(u.a)(Object(u.a)({},e),{},{name:t});f.update(e.id,n).then((function(o){c((function(t){return t.map((function(t){return e.id===t.id?n:t}))})),s("Name changed successfully to ".concat(t)),setTimeout((function(){s(null)}),5e3)})).catch((function(n){s("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){s(null)}),5e3)}))}(d),n(" "),r(" ")):function(){var e={name:t,id:i.length+1,phoneNumber:"".concat(a)};f.create(e).then((function(e){n(""),r("")})),f.getAll().then((function(e){c(e.data)}))}()},children:[Object(o.jsxs)("div",{style:{margin:"1rem 0"},children:["name: ",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:a,onChange:function(e){r(e.target.value)},required:!0})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},b=function(e){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("p",{children:[e.person," ",Object(o.jsx)("br",{}),e.phoneNumber," ",Object(o.jsx)("button",{onClick:e.handledelete,style:{margin:"0 1rem"},children:"Delete"})]})})},j=function(e){var n=e.nameFilter,t=e.persons,c=e.setPersons,r=e.setNotification,a=n.trim()?t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):t;return Object(o.jsx)(o.Fragment,{children:a.map((function(e){return Object(o.jsx)(b,{person:e.name,phoneNumber:e.phoneNumber,handledelete:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&f.del(e,n).then((function(n){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){r("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){r(null)}),5e3)}))}(e.id)}},e.id)}))})},h=function(e){var n=e.nameFilter,t=e.setNameFilter;e.persons;return Object(o.jsxs)("form",{children:[Object(o.jsx)("h2",{children:"Search Contact"}),Object(o.jsx)("input",{type:"search",placeholder:"Type to search",value:n,onChange:function(e){t(e.target.value)}})]})},p=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})};t(39);var O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),s=u[0],l=u[1],d=Object(c.useState)(""),b=Object(i.a)(d,2),O=b[0],v=b[1],N=Object(c.useState)(""),x=Object(i.a)(N,2),w=x[0],g=x[1],y=Object(c.useState)(null),C=Object(i.a)(y,2),k=C[0],F=C[1];return Object(c.useEffect)((function(){f.getAll().then((function(e){r(e.data)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(p,{message:k}),Object(o.jsx)(h,{nameFilter:w,setNameFilter:g,persons:t}),Object(o.jsx)("h2",{children:"Add New Contact"}),Object(o.jsx)(m,{setNewName:l,newName:s,setPersons:r,setNumber:v,newNumber:O,persons:t,setNotification:F}),Object(o.jsx)("h2",{children:"Contact List"}),Object(o.jsx)(j,{nameFilter:w,persons:t,setPersons:r,setNotification:F})]})};a.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.01e62eb1.chunk.js.map